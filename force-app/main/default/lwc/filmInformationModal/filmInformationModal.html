<template>
    <template if:true={modalShow}>

<section  role="dialog" tabindex="-1" aria-modal="true" aria-labelledby="modal-heading-01" class="slds-modal slds-fade-in-open slds-modal_large">
    <div class="slds-modal__container mainModal">
        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"></button>
        <div class="slds-modal__header">
            <h1 id="modal-heading-01" class="slds-modal__title slds-hyphenate">Film Information</h1>

                   <c-star-rating film-id={filmId} film-title={results.original_title}></c-star-rating>
        </div>
        
        <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
            <div class="modalInformationSection">
                <img src={imageUrl} style="height: 500px;">
                <div class="filmInformationSection">
                    <p class="informationText"><b>Title: </b>{results.original_title}</p>
                    <p class="informationText"> <b>Film information: </b> {results.overview}</p>
                    <p class="informationText"><b>Popularity: </b>{results.popularity}</p>
                    <p class="informationText"><b>Release data: </b>{results.release_date}</p>
                    <p class="informationText"><b>Budget: </b>{results.budget} $</p>
                    <p class="informationText"><b>Vote average: </b>{results.vote_average}</p>
                    <p class="informationText"><b>Vote count: </b>{results.vote_count}</p>
                    <!-- <div class="genresSection">
                        <b class="informationText">Filmy type :</b> 
                        <template for:each={results.genres} for:item="genres" >
                            <p class="itemGenresText informationText" key={genres.id}>{genres.name}</p>
                        </template>
</div> -->

</div>
</div>
<c-film-cast film-id={filmId}></c-film-cast>

<lightning-card title="Commentary section">

    <template for:each={filmCommentary} for:item="comm" for:index="index">
            <div class="comments" key={comm.id}>
                <div class="personalSection" key={comm.id}>
                    <span class="slds-avatar slds-avatar_profile-image-large">
                        <span class="slds-assistive-text">Person name</span>
                    </span>
                    <div key={comm.id} >{comm.value.Creator__c}</div>
                </div>                    
                <div class="commentarySection">
                    <div class="textField">               
                        <lightning-record-edit-form if:false={comm.readOnly} object-api-name="Movie_Films__c" record-id={testEdit} onsuccess={handleSuccess} onsubmit ={handleSubmit}>
                            <lightning-input-field field-name="Commentary__c"></lightning-input-field>
                            <lightning-button class="slds-m-top_small" variant="brand" type="submit" name="update" label="Update"></lightning-button>
                        </lightning-record-edit-form>    

                        <div class="userCommentary" if:true={comm.readOnly} key={comm.id} >{comm.value.Commentary__c}</div>
                        <div key={comm.id} >{comm.value.CreateData__c}</div>
                    </div>


                    <div class="editNavi">
                        <c-delete-comentary key={comm.id} index-fields={index} parent-param={comm.value} ondeletecomment={deleteComment} oneditcomment={handleEdit} style="height: 100%;"></c-delete-comentary>
                    </div>
                </div>
            </div>
    </template>
</lightning-card>

<lightning-card title="Add new comment">
    <div class="slds-media slds-comment slds-hint-parent">
        <div class="slds-media__figure">
            <span class="slds-avatar slds-avatar_profile-image-large">
            <span class="slds-assistive-text">Person name</span>
            </span>
        </div>
        <div class="slds-media__body">
            <div class="slds-publisher slds-publisher_comment">
                <textarea data-id="comment-01" id="comment-text-input-01" class="slds-publisher__input slds-input_bare slds-text-longform" placeholder="Write a commentâ€¦"></textarea>
            </div>
        </div>
    </div>
</lightning-card>
</div>
<div class="slds-modal__footer">
    <lightning-button class="navButton" variant="brand-outline" label="Close" onclick={closeModal}></lightning-button>
    <lightning-button class="navButton" variant="brand" label="Save" onclick={saveModal}></lightning-button>
</div>
</div>
</section>
<div class="slds-backdrop slds-backdrop_open" role="presentation"></div>

</template>
</template>